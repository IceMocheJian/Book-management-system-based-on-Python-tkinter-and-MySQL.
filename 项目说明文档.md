# 项目说明文档

项目名 --**《基于Python tkinter与MySQL的图书管理系统的设计与实现》**

## 项目说明

### 简介

本图书管理系统是基于Python编程语言、tkinter图形化用户界面库、MySQL数据库开发的小型项目，旨在帮助机构或个人实现对书籍的高效管理和查询。

本系统具有交互性和可视性的特点，拥有注册登录、添加书籍、删除书籍、修改书籍信息、查询书籍信息等基本功能，是一款轻量级、易于使用的应用程序。由于使用了tkinter图形化界面库，用户可以轻松地浏览和使用该系统。系统具有美观的界面、友好的操作流程、快速的数据访问速度和稳定的数据管理工具，用户可以用它方便地管理自己的图书数据。

总之，本图书管理系统通过提供一系列功能和良好的用户体验，使得用户可以快速、精确地管理和查询书籍信息，提高操作效率，方便管理工作。如果需要，该系统还可以在此基础上进行扩展、升级和改进，以满足更全面的需求。

### 开发工具

![image-20230606033050215](C:\Users\86135\AppData\Roaming\Typora\typora-user-images\image-20230606033050215.png)

![image-20230606033103576](C:\Users\86135\AppData\Roaming\Typora\typora-user-images\image-20230606033103576.png)

### 流程图

![image-20230606031821614](C:\Users\86135\AppData\Roaming\Typora\typora-user-images\image-20230606031821614.png)

### UML类图

![image-20230606031814657](C:\Users\86135\AppData\Roaming\Typora\typora-user-images\image-20230606031814657.png)

### 功能介绍

![image-20230606032726753](C:\Users\86135\AppData\Roaming\Typora\typora-user-images\image-20230606032726753.png)

![image-20230606032735141](C:\Users\86135\AppData\Roaming\Typora\typora-user-images\image-20230606032735141.png)

![image-20230606032743981](C:\Users\86135\AppData\Roaming\Typora\typora-user-images\image-20230606032743981.png)

![image-20230606032753904](C:\Users\86135\AppData\Roaming\Typora\typora-user-images\image-20230606032753904.png)

![image-20230606032801481](C:\Users\86135\AppData\Roaming\Typora\typora-user-images\image-20230606032801481.png)

![image-20230606032812273](C:\Users\86135\AppData\Roaming\Typora\typora-user-images\image-20230606032812273.png)

![image-20230606032821186](C:\Users\86135\AppData\Roaming\Typora\typora-user-images\image-20230606032821186.png)

![image-20230606032828364](C:\Users\86135\AppData\Roaming\Typora\typora-user-images\image-20230606032828364.png)

![image-20230606032839452](C:\Users\86135\AppData\Roaming\Typora\typora-user-images\image-20230606032839452.png)

![image-20230606032851859](C:\Users\86135\AppData\Roaming\Typora\typora-user-images\image-20230606032851859.png)

![image-20230606032902425](C:\Users\86135\AppData\Roaming\Typora\typora-user-images\image-20230606032902425.png)

![image-20230606032911027](C:\Users\86135\AppData\Roaming\Typora\typora-user-images\image-20230606032911027.png)

![image-20230606032920987](C:\Users\86135\AppData\Roaming\Typora\typora-user-images\image-20230606032920987.png)

![image-20230606032932251](C:\Users\86135\AppData\Roaming\Typora\typora-user-images\image-20230606032932251.png)



## 项目总结

本图书管理系统是基于Python编程语言、tkinter图形化用户界面库、MySQL数据库开发的小型项目，旨在帮助机构或个人实现对书籍的高效管理和查询。

本系统具有交互性和可视性的特点，拥有注册登录、添加书籍、删除书籍、修改书籍信息、查询书籍信息等基本功能，是一款轻量级、易于使用的应用程序。由于使用了tkinter图形化界面库，用户可以轻松地浏览和使用该系统。系统具有美观的界面、友好的操作流程、快速的数据访问速度和稳定的数据管理工具，用户可以用它方便地管理自己的图书数据。

总之，本图书管理系统通过提供一系列功能和良好的用户体验，使得用户可以快速、精确地管理和查询书籍信息，提高操作效率，方便管理工作。如果需要，该系统还可以在此基础上进行扩展、升级和改进，以满足更全面的需求。

### 版本优化过程

**第一版 控制台版本**

第一版系统在用户交互上使用了最原始的python控制台，使用JSON文件来存储与读取用户信息与书籍信息。不足：

* 需要在命令行中输入和输出信息，没有一个简洁直观的图形化操作界面，用户体验不好。

* 只能以JSON文件格式存储数据，数据缺乏结构性，数据存储规模小，且不支持集成的查询和复杂的数据操作。

<img src="C:\Users\86135\AppData\Roaming\Typora\typora-user-images\image-20230606032101716.png" alt="image-20230606032101716" style="zoom:50%;" />

**第二版** **tkinter版本**

第二版系统针对GUI问题，使用tkinter的图形用户界面以代替控制台的命令行界面，改善了用户体验。

不足：

* tkinter默认的图形化界面原始、粗糙，不够美观，用户体验依旧不够好。

* JSON文件格式存储数据的问题依然存在。

<img src="C:\Users\86135\AppData\Roaming\Typora\typora-user-images\image-20230606032137180.png" alt="image-20230606032137180" style="zoom:50%;" />

**第三版 数据库版本**

第三版系统最大的改动是使用了MySQL数据库来存储和管理用户和书籍数据。MySQL可靠的数据存储、高效的数据管理能力，能够满足图书管理系统需要的数据处理和持久化需求，彻底解决了数据存储问题。

此外，第三版使用了ttkbootstrap来美化GUI框架，使用了交互性弹窗功能，修改了更新信息、查询书籍、退出系统等功能的细节，并完成了各功能模块与接口的封装等等。第三版即本系统的最终版本。

<img src="C:\Users\86135\AppData\Roaming\Typora\typora-user-images\image-20230606032207309.png" alt="image-20230606032207309" style="zoom:50%;" />

### 小组分工

* 张铭坤：提出项目方向，设计框架，编写核心功能的代码，第一版的设计者。

* 陈圣洋：设计UML类图与流程图，使用tkinter编写图形化界面，封装模块和接口，将项目改进到第二版，负责ppt的展示。

* 黄子健：使用MySQL数据库改进存储方式，美化GUI界面，优化具体功能细节，将项目改进到第三版，负责ppt的制作与项目演示视频的录制。

<img src="C:\Users\86135\AppData\Roaming\Typora\typora-user-images\image-20230606032304430.png" alt="image-20230606032304430" style="zoom:50%;" />



## 源程序

https://github.com/IceMocheJian/repository

```python
import tkinter
from tkinter import messagebox
import ttkbootstrap as ttk
from ttkbootstrap import Style
import pymysql

class Root_system_func():

    def login(self): # 登录
        username = username_input.get()
        password = password_input.get()
        # 创建数据库连接
        conn = pymysql.connect(
            host='127.0.0.1',
            user='root',
            passwd='H1394830398h',
            port=3306,
            db='library',
            charset='utf8'
        )
        cursor = conn.cursor()
        sql = "select * from user_table"
        cursor.execute(sql)
        results = cursor.fetchall()
        f = 0
        for row in results:
            if username == row[0]:
                f = 1
                if password == row[1]:
                    messagebox.showinfo(title='提示', message='登录成功！')
                    window.destroy()
                    system(username)
                else:
                    messagebox.showinfo(title='提示', message='用户名或密码错误，请重新输入。')
        if f == 0:
            messagebox.showinfo(title='提示', message='用户名不存在，请重新输入。')
        username_input.delete(0, 'end')
        password_input.delete(0, 'end')
        cursor.close()
        conn.close()  # 关闭连接

    def register(self): # 注册
        username = username_input.get()
        password = password_input.get()
        # 创建数据库连接
        conn = pymysql.connect(
            host='127.0.0.1',
            user='root',
            passwd='H1394830398h',
            port=3306,
            db='library',
            charset='utf8'
        )
        cursor = conn.cursor()
        sql = "select * from user_table"
        cursor.execute(sql)
        results = cursor.fetchall()
        f = 0
        for row in results:
            if username == row[0]:
                f = 1
                break
        if f == 1:
            messagebox.showinfo(title='提示', message='该用户名已存在，请重新输入。')
        else:
            sql = 'insert into user_table(username,password) values(%s, %s)'
            cursor.execute(sql, (username, password))
            conn.commit()
            messagebox.showinfo(title='提示', message='注册成功！请登录')
        username_input.delete(0, 'end')
        password_input.delete(0, 'end')
        cursor.close()
        conn.close()  # 关闭连接

    def exit_system(self): # 退出
        response = tkinter.messagebox.askquestion("提示", "是否退出图书管理系统？")
        if response == 'yes':
            messagebox.showinfo(title='提示', message="感谢使用图书管理系统，再见！")
            window.destroy()
            exit()

class System_func():

    def add_book(self, a, b, c, d, e): # 添加书籍
        name = a.get()
        author = b.get()
        publisher = c.get()
        isbn = d.get()
        price = e.get()
        # 创建数据库连接
        conn = pymysql.connect(
            host='127.0.0.1',
            user='root',
            passwd='H1394830398h',
            port=3306,
            db='library',
            charset='utf8'
        )
        cursor = conn.cursor()
        sql = "select * from book_table"
        cursor.execute(sql)
        results = cursor.fetchall()
        books = [row[0] for row in results]
        if name in books:
            response = tkinter.messagebox.askquestion("提示", "该书籍已存在，是否更新该书籍信息？")
            if response == 'yes':
                self.update_book(a, a, b, c, d, e)
        else:
            sql = 'insert into book_table(name, author, publisher, ISBN, price) \
                  values(%s, %s, %s, %s, %s)'
            cursor.execute(sql, (name, author, publisher, isbn, price))
            conn.commit()
            messagebox.showinfo(title='提示', message='添加成功')
        a.delete(0, 'end')
        b.delete(0, 'end')
        c.delete(0, 'end')
        d.delete(0, 'end')
        e.delete(0, 'end')
        cursor.close()
        conn.close()  # 关闭连接

    def remove_book(self, a): # 删除书籍
        name = a.get()
        # 创建数据库连接
        conn = pymysql.connect(
            host='127.0.0.1',
            user='root',
            passwd='H1394830398h',
            port=3306,
            db='library',
            charset='utf8'
        )
        cursor = conn.cursor()
        sql = "select * from book_table"
        cursor.execute(sql)
        results = cursor.fetchall()
        books = [row[0] for row in results]
        if name in books:
            response = tkinter.messagebox.askquestion("提示", "删除操作无法撤销，是否确认删除？")
            if response == 'yes':
                sql = 'delete from book_table where name = %s'
                cursor.execute(sql, name)
                conn.commit()
                messagebox.showinfo(title='提示', message="删除成功")
        else:
            messagebox.showinfo(title='提示', message="未找到该书籍")
        a.delete(0, 'end')
        cursor.close()
        conn.close()  # 关闭连接

    def update_book(self, a1, a, b, c, d, e): # 修改信息
        oldname = a1.get()
        name = a.get()
        author = b.get()
        publisher = c.get()
        isbn = d.get()
        price = e.get()
        # 创建数据库连接
        conn = pymysql.connect(
            host='127.0.0.1',
            user='root',
            passwd='H1394830398h',
            port=3306,
            db='library',
            charset='utf8'
        )
        cursor = conn.cursor()
        sql = "select * from book_table"
        cursor.execute(sql)
        results = cursor.fetchall()
        books = [row[0] for row in results]
        if oldname in books:
            response = tkinter.messagebox.askquestion("提示", "更新后原信息将被覆盖，是否确认更新？")
            if response == 'yes':
                sql = 'update book_table set name = %s, author = %s, publisher = %s, ISBN = %s, price = %s where name = %s'
                cursor.execute(sql, (name, author, publisher, isbn, price, oldname))
                conn.commit()
                messagebox.showinfo(title='提示', message="修改成功")
        else:
            messagebox.showinfo(title='提示', message="未找到书籍")
        a1.delete(0, 'end')
        a.delete(0, 'end')
        b.delete(0, 'end')
        c.delete(0, 'end')
        d.delete(0, 'end')
        e.delete(0, 'end')
        cursor.close()
        conn.close()  # 关闭连接

    def search_book(self, a): # 查找书籍
        name = a.get()
        # 创建数据库连接
        conn = pymysql.connect(
            host='127.0.0.1',
            user='root',
            passwd='H1394830398h',
            port=3306,
            db='library',
            charset='utf8'
        )
        cursor = conn.cursor()
        sql = "select * from book_table"
        cursor.execute(sql)
        results = cursor.fetchall()
        books = [row[0] for row in results]
        if name in books:
            for row in results:
                if name == row[0]:
                    author = row[1]
                    publisher = row[2]
                    ISBN = row[3]
                    price = row[4]
            self.book_window(name, author, publisher, ISBN, price)
        else:
            messagebox.showinfo(title='提示', message="未找到书籍")
        a.delete(0, 'end')
        cursor.close()
        conn.close()  # 关闭连接

    def book_window(self, name, author, publisher, ISBN, price): # 书籍信息页面
        global my_book
        my_book = tkinter.Tk()
        my_book.title("书籍详情")
        my_book.geometry('250x250')
        my_book.geometry('+400+300')
        book_text = tkinter.Label(my_book,
                                  text="您查询的书籍详细信息如下:\n\n 书名: %s\n\n 作者: %s\n\n 出版社: %s\n\n ISBN: %s\n\n 价格: %s\n\n"
                                       % (name, author, publisher, ISBN, price),
                                  justify=tkinter.LEFT)
        book_text.place(x=10, y=10)
        button = tkinter.Button(my_book, text='返回', command=my_book.destroy, width=3, height=1)
        button.place(x=200, y=200)

    def exit_user_system(self): # 退出系统
        response = tkinter.messagebox.askquestion("提示", "是否退出图书管理系统？")
        if response == 'yes':
            messagebox.showinfo(title='提示', message="感谢使用图书管理系统，再见！")
            user_system.destroy()
            exit()


def root_system():

    global username_input, password_input, window
    window = style.master
    window.title("欢迎使用图书管理系统")
    window.geometry('400x400')
    username_input = tkinter.Entry(window, width=15)
    username_input.place(x=195, y=100)
    password_input = tkinter.Entry(window, width=15, show='*')
    password_input.place(x=195, y=150)

    button1 = tkinter.Button(window, text='登录', command=root_system_func.login, width=3, height=1)
    button2 = tkinter.Button(window, text='注册', command=lambda: root_system_func.register(), width=3, height=1)
    button3 = tkinter.Button(window, text='退出', command=root_system_func.exit_system, width=3, height=1)
    button1.place(x=150, y=200)
    button2.place(x=200, y=200)
    button3.place(x=250, y=200)

    text1 = tkinter.Label(window, bd=4, fg='black', text='用户名')
    text2 = tkinter.Label(window, bd=4, fg='black', text='密码')
    text1.place(x=130, y=100)
    text2.place(x=130, y=150)
    window.mainloop()

def system(username):

    global user_system
    user_system = tkinter.Tk()
    user_system.title("欢迎进入%s的秘密小窝" % str(username))
    user_system.geometry('800x800')
    note = ttk.Notebook()
    note.place(relx=0.1, rely=0.1, relwidth=0.8, relheight=0.8)
    #添加
    frame1 = tkinter.Frame()
    note.add(frame1, text='添加书籍')
    name = tkinter.Entry(frame1, width=15)
    name.place(relx=0.4, rely=0.3)
    text111 = tkinter.Label(frame1, bd=2, fg='black', bg='white', text='请输入书籍的相关信息')
    text111.place(relx=0.35, rely=0.21)
    text11 = tkinter.Label(frame1, bd=4, fg='black', bg='white', text='书名')
    text11.place(relx=0.3, rely=0.3)
    author = tkinter.Entry(frame1, width=15)
    author.place(relx=0.4, rely=0.35)
    text12 = tkinter.Label(frame1, bd=4, fg='black', bg='white', text='作者')
    text12.place(relx=0.3, rely=0.35)
    publisher = tkinter.Entry(frame1, width=15)
    publisher.place(relx=0.4, rely=0.4)
    text13 = tkinter.Label(frame1, bd=4, fg='black', bg='white', text='出版社')
    text13.place(relx=0.3, rely=0.4)
    isbn = tkinter.Entry(frame1, width=15)
    isbn.place(relx=0.4, rely=0.45)
    text14 = tkinter.Label(frame1, bd=4, fg='black', bg='white', text='ISBN')
    text14.place(relx=0.3, rely=0.45)
    price = tkinter.Entry(frame1, width=15)
    price.place(relx=0.4, rely=0.5)
    text15 = tkinter.Label(frame1, bd=4, fg='black', bg='white', text='价格')
    text15.place(relx=0.3, rely=0.5)
    add = tkinter.Button(frame1, text='添加',
                         command=lambda: system_func.add_book(name, author, publisher, isbn, price),
                         width=5, height=2)
    add.place(relx=0.5, rely=0.6)
    leave = tkinter.Button(frame1, text='退出', command=system_func.exit_user_system, width=5, height=2)
    leave.place(relx=0.9, rely=0.9)
    # 删除
    frame2 = tkinter.Frame()
    note.add(frame2, text='删除书籍')
    text211 = tkinter.Label(frame2, bd=2, fg='black', bg='white', text='请输入要删除的书')
    text211.place(relx=0.35, rely=0.33)
    name2 = tkinter.Entry(frame2, width=15)
    name2.place(relx=0.4, rely=0.4)
    text21 = tkinter.Label(frame2, bd=4, fg='black', bg='white', text='书名')
    text21.place(relx=0.3, rely=0.4)
    remove = tkinter.Button(frame2, text='删除', command=lambda: system_func.remove_book(name2), width=5, height=2)
    remove.place(relx=0.5, rely=0.6)
    leave = tkinter.Button(frame2, text='退出', command=system_func.exit_user_system, width=5, height=2)
    leave.place(relx=0.9, rely=0.9)
    # 更新
    frame3 = tkinter.Frame()
    note.add(frame3, text='修改信息')
    text311 = tkinter.Label(frame3, bd=2, fg='black', bg='white', text='请输入要修改的书')
    text311.place(relx=0.35, rely=0.14)
    name3 = tkinter.Entry(frame3, width=15)
    name3.place(relx=0.4, rely=0.21)
    text31 = tkinter.Label(frame3, bd=4, fg='black', bg='white', text='书名')
    text31.place(relx=0.3, rely=0.21)
    text311 = tkinter.Label(frame3, bd=4, fg='black', bg='white', text='请输入新的书籍信息')
    text311.place(relx=0.35, rely=0.28)
    namen = tkinter.Entry(frame3, width=15)
    namen.place(relx=0.4, rely=0.35)
    text31n = tkinter.Label(frame3, bd=4, fg='black', bg='white', text='书名')
    text31n.place(relx=0.3, rely=0.35)
    author3 = tkinter.Entry(frame3, width=15)
    author3.place(relx=0.4, rely=0.4)
    text32 = tkinter.Label(frame3, bd=4, fg='black', bg='white', text='作者')
    text32.place(relx=0.3, rely=0.4)
    publisher3 = tkinter.Entry(frame3, width=15)
    publisher3.place(relx=0.4, rely=0.45)
    text33 = tkinter.Label(frame3, bd=4, fg='black', bg='white', text='出版社')
    text33.place(relx=0.3, rely=0.45)
    isbn3 = tkinter.Entry(frame3, width=15)
    isbn3.place(relx=0.4, rely=0.5)
    text34 = tkinter.Label(frame3, bd=4, fg='black', bg='white', text='ISBN')
    text34.place(relx=0.3, rely=0.5)
    price3 = tkinter.Entry(frame3, width=15)
    price3.place(relx=0.4, rely=0.55)
    text35 = tkinter.Label(frame3, bd=4, fg='black', bg='white', text='价格')
    text35.place(relx=0.3, rely=0.55)
    update = tkinter.Button(frame3, text='更新',
                         command=lambda: system_func.update_book(name3, namen, author3, publisher3, isbn3, price3),
                         width=5, height=2)
    update.place(relx=0.5, rely=0.65)
    leave = tkinter.Button(frame3, text='退出', command=system_func.exit_user_system, width=5, height=2)
    leave.place(relx=0.9, rely=0.9)
    #查询
    frame4 = tkinter.Frame()
    note.add(frame4, text='查询书籍')
    text211 = tkinter.Label(frame4, bd=2, fg='black', bg='white', text='请输入要查询的书')
    text211.place(relx=0.35, rely=0.33)
    name4 = tkinter.Entry(frame4, width=15)
    name4.place(relx=0.4, rely=0.4)
    text41 = tkinter.Label(frame4, bd=4, fg='black', bg='white', text='书名')
    text41.place(relx=0.3, rely=0.4)
    search = tkinter.Button(frame4, text='查询', command=lambda: system_func.search_book(name4), width=5, height=2)
    search.place(relx=0.5, rely=0.6)
    leave = tkinter.Button(frame4, text='退出', command=system_func.exit_user_system, width=5, height=2)
    leave.place(relx=0.9, rely=0.9)


style = Style()
root_system_func = Root_system_func()
system_func = System_func()
root_system()
```

